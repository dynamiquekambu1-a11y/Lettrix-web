{% extends "base.html" %}
{% block content %}

<div class="card shadow-lg p-4 mb-4">
  <h3 class="mb-3"><i class="bi bi-pen"></i> Leave Request Letter</h3>
  <form method="post" enctype="multipart/form-data" action="{{ url_for('generate') }}">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Employee Full Name *</label>
        <input name="employee_full_name" class="form-control" value="{{ employee_full_name }}">
      </div>
      <div class="col-md-6 mb-3">
        <label>Position / Job Title *</label>
        <input name="position" class="form-control" value="{{ position }}">
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Department (Optional)</label>
        <input name="department" class="form-control" value="{{ department }}">
      </div>
      <div class="col-md-6 mb-3">
        <label>Company Name *</label>
        <input name="company_name" class="form-control" value="{{ company_name }}">
        <input name="company_address" placeholder="Company full address">
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Supervisor / Manager Name *</label>
        <input name="supervisor_name" class="form-control" value="{{ supervisor_name }}">
      </div>
      <div class="col-md-6 mb-3">
        <label>Leave Type *</label>
        <input name="leave_type" class="form-control" value="{{ leave_type }}">
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Start Date *</label>
        <input name="start_date" class="form-control" value="{{ start_date }}">
      </div>
      <div class="col-md-6 mb-3">
        <label>End Date *</label>
        <input name="end_date" class="form-control" value="{{ end_date }}">
      </div>
    </div>
    <div class="mb-3">
      <label>Total Number of Days *</label>
      <input name="total_days" class="form-control" value="{{ total_days }}">
    </div>
    <div class="mb-3">
      <label>Reason for Leave *</label>
      <textarea name="reason" rows="3" class="form-control">{{ reason }}</textarea>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Emergency Contact (Optional)</label>
        <input name="emergency_contact" class="form-control" value="{{ emergency_contact }}">
      </div>
      <div class="col-md-6 mb-3">
        <label>Backup Plan / Who will cover work (Optional)</label>
        <input name="backup_plan" class="form-control" value="{{ backup_plan }}">
      </div>
    </div>
    <div class="mb-3">
      <label>Date of Letter Submission *</label>
      <input name="submission_date" class="form-control" value="{{ submission_date }}">
    </div>
    <div class="mb-3">
      <label>Company Logo (Optional)</label>
      <input type="file" name="company_logo_file" class="form-control">
      <input type="hidden" name="company_logo" value="{{ company_logo }}">
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Signer Name (Optional)</label>
        <input name="signer_name" class="form-control" value="{{ signer_name }}">
      </div>
      <div class="col-md-6 mb-3">
        <label>Signer Role (Optional)</label>
        <input name="signer_role" class="form-control" value="{{ signer_role }}">
      </div>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-light" type="submit"><i class="bi bi-gear"></i> Generate</button>
      <a class="btn btn-outline-light" href="{{ url_for('index') }}">Reset</a>
    </div>
  </form>
</div>

<div class="card shadow-lg p-3 mt-3">
  <h4>Generated text</h4>
  <form method="post" action="{{ url_for('preview_leave') }}">
    <textarea name="generated_text" rows="12" class="form-control mb-2">{{ generated_text }}</textarea>
    {% for k, v in fields.items() %}
      <input type="hidden" name="{{ k }}" value="{{ v }}">
    {% endfor %}
    <button class="btn btn-light"><i class="bi bi-eye"></i> Preview</button>
  </form>
</div>

{% endblock %}
